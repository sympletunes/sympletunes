document.addEventListener("DOMContentLoaded", function () {
  const menu = document.getElementById("menu-item-4164");
  if (!menu) {
    console.warn("Menu element (#menu-item-4164) not found.");
    return;
  }

  // Function to create the mobile toggle button
  function createToggleButton() {
    // Hide the menu by default on mobile
    menu.style.display = "none";

    const toggleBtn = document.createElement("button");
    toggleBtn.id = "mobile-menu-toggle";
    toggleBtn.innerHTML = '<img src="social-media.png" alt="Social Media Toggle" style="width:100%; height:100%; object-fit:contain;">';
    
    // Apply the new style for bottom-right placement
    toggleBtn.style.position = "fixed";
    toggleBtn.style.right = "10px";
    toggleBtn.style.bottom = "63px";
    toggleBtn.style.padding = "10px";
    toggleBtn.style.backgroundColor = "white";
    toggleBtn.style.border = "none";
    toggleBtn.style.borderRadius = "8px";
    toggleBtn.style.cursor = "pointer";
    toggleBtn.style.zIndex = "1000";
    toggleBtn.style.width = "58px";
    toggleBtn.style.height = "48px";
    toggleBtn.style.display = "flex";
    toggleBtn.style.justifyContent = "center";
    toggleBtn.style.alignItems = "center";
    
    // Toggle the menu on click
    toggleBtn.addEventListener("click", function () {
      if (menu.style.display === "none" || menu.style.display === "") {
        menu.style.display = "flex";
      } else {
        menu.style.display = "none";
      }
    });
    
    document.body.appendChild(toggleBtn);
  }

  // On load: if mobile view, create the toggle button
  if (window.innerWidth <= 600) {
    createToggleButton();
  }

  // Listen for window resize events to adjust between mobile and desktop
  window.addEventListener("resize", function () {
    if (window.innerWidth > 600) {
      // Desktop view: remove inline styles and mobile toggle
      menu.style.display = ""; // Clear inline style so desktop CSS applies
      const existingToggle = document.getElementById("mobile-menu-toggle");
      if (existingToggle) {
        existingToggle.remove();
      }
    } else {
      // Mobile view: if the toggle button doesn't exist, create it
      if (!document.getElementById("mobile-menu-toggle")) {
        createToggleButton();
      }
    }
  });
});
